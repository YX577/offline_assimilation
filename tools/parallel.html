
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Running many calculations at once &#8212; Improving reanalysis with offline assimilation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Offline assimilation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_small.png" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../preface.html">What this is, and why</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../representing_uncertainty/representing_uncertainty.html">Representing uncertainty in weather maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../da_for_ds.html">Meteorological Data Assimilation for Data Scientists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/module_DIYA.html">DIYA: A module for do-it-yourself data assimilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DWR_data/DWR_data.html">Improving 20CR with observations from the Daily Weather Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../marine_data/marine_data.html">Improving 20CR with ship observations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../more_than_mslp/more_than_mslp.html">More than just MSLP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../better_than_olr/better_than_olr.html">More than just linear regression?</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Authors and acknowledgements</a></li>
</ul>
<h3><a href="https://github.com/philip-brohan/offline_assimilation">Get a copy</a></h3>

<ul>
<li><a href="https://github.com/philip-brohan/offline_assimilation"
           rel="nofollow">Github repository</a></li>
</ul>

<h3>Found a bug, or have a suggestion?</h3>

Please <a href="https://github.com/philip-brohan/offline_assimilation/issues/new">raise an issue</a>.
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="running-many-calculations-at-once">
<h1>Running many calculations at once<a class="headerlink" href="#running-many-calculations-at-once" title="Permalink to this headline">¶</a></h1>
<p>As there are lots of observations to use, it’s often necessary to do a lot of calculation. To do this fast, we need to parallelise it - to do more than one thing at a time.</p>
<p>My preferred way to do this is to divide the calculational task into many small independent tasks, and then process this list of tasks as fast as possible by running many of them at once. The best way to do this is system dependent.</p>
<div class="section" id="laptop-approach-gnu-parallel">
<h2>Laptop approach - GNU parallel<a class="headerlink" href="#laptop-approach-gnu-parallel" title="Permalink to this headline">¶</a></h2>
<p>A simple tool to process task queues is <a class="reference external" href="https://www.gnu.org/software/parallel/">GNU parallel</a>. This will use all the cores of a single computer, so if your machine has 4 cores it will run the tasks 4 at a time. If the tasks each use a lot of memory it may be desirable to tell it to run fewer at once.</p>
</div>
<div class="section" id="met-office-approach-spice-cluster">
<h2>Met Office approach - SPICE cluster<a class="headerlink" href="#met-office-approach-spice-cluster" title="Permalink to this headline">¶</a></h2>
<p>At the Met Office, the Scientific Processing and Intensive Compute Environment (SPICE) can be used to run many tasks in parallel. SPICE is a cluster managed by the <a class="reference external" href="https://slurm.schedmd.com/">slurm workload manager</a>, so to use it each task in the job list needs to be converted into a slurm job and submitted to the cluster. The script to do this is <a class="reference internal" href="spice_parallel.html"><span class="doc">spice_parallel</span></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Offline assimilation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    </div>
  </body>
</html>